---
title: 범용 편집기의 Dynamic Forms용 규칙 편집기
description: 범용 편집기의 규칙 편집기를 사용하여 동적 지능형 양식을 만듭니다. 코딩하지 않고 조건부 논리, 계산 및 대화형 동작을 추가합니다.
feature: Edge Delivery Services
role: Admin, Architect, Developer
level: Intermediate
exl-id: 846f56e1-3a98-4a69-b4f7-40ec99ceb348
source-git-commit: 2e2a0bdb7604168f0e3eb1672af4c2bc9b12d652
workflow-type: tm+mt
source-wordcount: '3597'
ht-degree: 23%

---


# 범용 편집기의 Dynamic Forms용 규칙 편집기

범용 편집기의 규칙 편집기를 사용하면 사용자 입력에 실시간으로 응답하는 지능적이고 동적인 양식을 만들 수 있습니다. 코드를 작성하지 않고도 조건부 필드 가시성, 자동화된 계산 및 복잡한 비즈니스 논리를 통해 정적 양식을 대화형 환경으로 변환할 수 있습니다.

## 학습 내용

이 안내서를 마치면 다음과 같은 작업을 수행할 수 있습니다.

- 규칙의 작동 방식과 다양한 규칙 유형을 사용할 시기를 이해합니다.
- 범용 편집기에서 규칙 편집기 활성화 및 액세스
- 양식 필드를 동적으로 표시하거나 숨기기 위한 조건부 논리 만들기
- 자동화된 계산 및 데이터 유효성 검사 구현
- 복잡한 비즈니스 규칙에 대한 사용자 정의 함수 구축
- 최적의 양식 성능을 위해 모범 사례 적용

## 규칙 편집기를 사용하는 이유

**정적 Forms을 스마트 환경으로 변환:**

- **조건부 논리**: 사용자 선택에 따라 관련 필드를 표시합니다.
- **동적 계산**: 사용자 유형에 따라 값을 자동으로 계산합니다.
- **데이터 유효성 검사**: 실시간 피드백을 제공하고 오류를 방지합니다.
- **향상된 UX**: 양식 복잡성을 줄이고 사용자에게 논리 흐름을 안내합니다.
- **코딩이 필요하지 않습니다**: 개발자가 아닌 사용자가 액세스할 수 있는 비주얼 인터페이스

**일반적인 사용 사례:**

- 조건부 공제가 포함된 세금 계산 양식
- 여러 단계로 구성된 마법사(분기 경로 포함)
- 요율 계산이 포함된 보험 양식
- 조건부 질문이 있는 설문 조사 양식
- 동적 가격책정이 적용된 전자 상거래 양식

## 규칙 작동 방식

규칙은 양식을 지능적이고 반응형으로 만드는 자동화된 지침입니다. 특정 조건이 충족될 경우 어떤 일이 발생할지 지정합니다.

### **규칙 구성 요소**

**조건**: true 또는 false로 평가되는 논리 테스트입니다.

- &quot;사용자의 수입이 $50,000 이상입니까?&quot;
- &quot;사용자가 보험 적용을 위해 &#39;예&#39;를 선택했습니까?&quot;
- &quot;양식 필드가 비어 있습니까?&quot;

**작업**: 조건이 충족될 때 발생하는 결과입니다.

- 양식 필드 표시 또는 숨기기
- 자동으로 값 계산
- 확인 메시지 표시
- 구성 요소 활성화 또는 비활성화

### **규칙 논리 패턴**

**1. Condition-Action(When-Then)**

```
WHEN gross salary > 50000
THEN show "Additional Deduction" field
```

*우수 사례:* 조건부 필드 가시성, 다이내믹 콘텐츠

**2. Action-Condition(Set-If)**

```
SET taxable income = gross salary - deductions
IF deductions are applicable
```

*최적의 대상:* 계산, 데이터 변환

**3. Action-Condition-Alternate(If-Then-Else)**

```
IF income > 50000
THEN show "High Income" fields
ELSE show "Standard Income" fields
```

*최적의 대상:* 분기 논리, 함께 수행할 수 없는 옵션

### **실제 사례**

**시나리오**: 세금 계산 양식

- **조건**: &quot;총 급여가 $50,000를 초과합니다.&quot;
- **기본 작업**: &quot;추가 공제&quot; 필드 표시
- **대체 작업**: &quot;추가 공제&quot; 필드 숨기기
- **결과**: 사용자는 수입 수준에 따라 관련 필드만 봅니다.

## 사전 요구 사항

규칙 편집기 작업을 시작하기 전에 다음을 확인하십시오.

### **액세스 요구 사항**

- **AEM as a Cloud Service**&#x200B;에 대한 액세스 권한 작성 중
- 규칙 편집기 확장이 활성화된 **유니버설 편집기**
- AEM 환경에서 양식 편집 권한

### **기술 요구 사항**

- **기본 양식 디자인 지식**: 양식 구성 요소 및 해당 속성에 익숙함
- **비즈니스 논리 친숙도**: 조건부 요구 사항을 정의하는 기능
- **기본 JavaScript 지식**(사용자 지정 함수에만 필요)

### **규칙 편집기 확장 사용**

범용 편집기에서는 규칙 편집기 확장 기능이 기본적으로 활성화되어 있지 않습니다. [Extension Manager](/help/implementing/developing/extending/extension-manager.md)에서 활성화할 수 있습니다.

**확장을 활성화한 후:**
양식 구성 요소를 선택하면 오른쪽 상단 모서리에 ![edit-rules](/help/forms/assets/edit-rules-icon.svg) 아이콘이 표시됩니다.

![유니버설 편집기 규칙 편집기](/help/edge/docs/forms/assets/universal-editor-rule-editor.png)
*그림: 양식 구성 요소를 선택하면 규칙 편집기 아이콘이 표시됩니다*

**규칙 편집기에 액세스하려면:**

1. 범용 편집기에서 양식 구성 요소를 선택합니다.
2. 표시되는 ![edit-rules](/help/forms/assets/edit-rules-icon.svg) 아이콘을 클릭합니다.
3. 규칙 편집기 인터페이스가 새 패널에서 열립니다.

![규칙 편집기 사용자 인터페이스](/help/edge/docs/forms/assets/rule-editor-for-field.png)
*그림: 구성 요소 규칙을 편집하기 위한 규칙 편집기 인터페이스*

>[!NOTE]
>
> 이 문서에서 &quot;양식 구성 요소&quot; 및 &quot;양식 개체&quot;는 동일한 요소(입력 필드, 단추, 패널 등)를 참조합니다.

## 규칙 편집기 인터페이스 개요

규칙 편집기는 규칙을 만들고 관리하기 위한 사용자 친화적인 시각적 인터페이스를 제공합니다.

![규칙 편집기 사용자 인터페이스](/help/edge/docs/forms/assets/rule-editor-interface.png)
*그림: 번호가 매겨진 구성 요소가 있는 전체 규칙 편집기 인터페이스*

### **인터페이스 구성 요소**

**1. 구성 요소 제목 및 규칙 유형**

- **목적**: 선택한 구성 요소의 이름과 현재 규칙 유형을 표시합니다.
- **예**: &quot;When&quot; 규칙이 선택된 상태로 &quot;총 급여 입력&quot;(텍스트 입력).
- **팁**: 올바른 구성 요소를 편집하고 있는지 항상 확인하십시오.

**2. 양식 개체 및 함수 패널**

- **양식 개체 탭**: 모든 양식 구성 요소를 계층 구조로 볼 수 있습니다.
   - 다음에 사용: 규칙의 다른 필드 참조.
   - 탐색: 확장하거나 축소하여 특정 구성 요소를 찾습니다.
- **함수 탭**: 수학 및 논리 함수가 내장되어 있습니다.
   - 사용: 복잡한 계산 및 데이터 조작 수행.
   - 범주: 수학, 문자열, 날짜 및 검증 함수.

**3. 패널 전환 단추**

- **목적**: 개체 및 함수 패널을 표시하거나 숨깁니다.
- **팁**: 패널의 끄기를 전환하여 규칙 편집 작업 영역을 늘리십시오.
- **바로 가기 키**: 복잡한 규칙으로 작업할 때 유용합니다.

**4. 시각적 규칙 빌더**

- **목적**: 규칙 논리를 구성하는 기본 영역입니다.
- **기능**: 드래그 앤 드롭 인터페이스와 드롭다운 선택기입니다.
- **워크플로**: 규칙 유형→ 선택하고 조건 → 작업 설정을 참조하십시오.

**5. 컨트롤 단추**

- **완료**: 규칙을 저장하고 편집기를 닫습니다.
- **취소**: 변경 내용을 취소하고 저장하지 않고 편집기를 닫습니다.
- **팁**: [완료]를 클릭하기 전에 항상 규칙을 테스트하십시오.

### **규칙 관리**

규칙이 이미 있는 구성 요소에 대해 규칙 편집기를 열면

![양식 개체의 사용 가능한 규칙을 표시합니다](/help/edge/docs/forms/assets/rule-editor15.png)
*그림: 양식 구성 요소에 대한 기존 규칙 관리*

**사용 가능한 작업:**

- **보기**: 규칙 요약 및 논리를 검토합니다.
- **편집**: 기존 규칙 조건 또는 작업을 수정합니다.
- **순서 바꾸기**: 규칙(위에서 아래로 실행되는 규칙)의 실행 순서를 변경합니다.
- **활성화/비활성화**: 테스트 목적으로 일시적으로 규칙을 설정하거나 해제합니다.
- **삭제**: 규칙을 영구적으로 제거합니다.

>[!TIP]
>
> **규칙 실행 순서가 문제**: 규칙이 위에서 아래로 실행됩니다. 일반적인 조건 앞에 더 구체적인 조건을 두어라.

## 사용 가능한 규칙 유형

규칙 편집기는 기능별로 구성된 포괄적인 규칙 유형 세트를 제공합니다. 특정 사용 사례에 따라 적절한 유형을 선택합니다.

### **조건부 논리 규칙**

**When**

- **목적**: 복잡한 논리를 구현하기 위한 기본 조건부 규칙 역할을 합니다.
- **사용 사례**: 예를 들어 &quot;사용자가 &#39;기혼&#39;을 선택하면 배우자 정보 필드를 표시합니다.&quot;
- **논리 패턴**: 조건 → 동작(선택적 대체 동작 포함)

**숨기기/표시**

- **목적**: 지정된 조건에 따라 필드 가시성을 제어합니다.
- **사용 사례**: 관련 없는 섹션을 숨기거나 점진적 공개를 사용하도록 설정합니다.
- **모범 사례**: 깔끔하고 집중된 사용자 경험을 만드는 데 사용합니다.

**사용/사용 안 함**

- **목적**: 조건에 따라 필드를 상호 작용할 수 있는지 여부를 제어합니다.
- **사용 사례**: 모든 필수 필드가 완료될 때까지 전송 단추를 사용하지 않도록 설정합니다.
- **모범 사례**: 사용자에게 명확한 시각적 피드백을 제공합니다.

### **데이터 조작 규칙**

**값 설정**

- **목적**: 필드 값을 자동으로 채웁니다.
- **사용 사례**: 오늘 날짜를 설정하거나 합계를 계산하거나 필드 간에 값을 복사합니다.
- **모범 사례**: 사용자의 노력을 줄이고 정확성을 확인하는 데 사용합니다.

**값 지우기**

- **목적**: 조건이 변경되면 필드에서 데이터를 제거합니다.
- **사용 사례**: 부모 선택 내용이 변경되면 종속 필드를 지웁니다.
- **모범 사례**: 데이터 무결성을 유지하고 분리된 값을 방지합니다.

**형식**

- **목적**: 값이 표시되는 방식을 변환합니다.
- **사용 사례**: 통화, 전화 번호 또는 날짜 형식을 지정합니다.
- **모범 사례**: 기본 데이터를 변경하지 않고 가독성을 향상시킵니다.

### **유효성 검사 규칙**

**유효성 검사**

- **목적**: 사용자 지정 유효성 검사 논리를 구현합니다.
- **사용 사례**: 복잡한 비즈니스 규칙 또는 필드 간 유효성 검사를 적용합니다.
- **모범 사례**: 명확하고 실행 가능한 오류 메시지를 제공합니다.

### **계산 규칙**

**수학 식**

- **목적**: 자동 계산을 수행합니다.
- **사용 사례**: 세금 계산, 합계 또는 백분율.
- **모범 사례**: 사용자가 입력할 때 실시간으로 계산을 업데이트합니다.

### **사용자 인터페이스 규칙**

**포커스 설정**

- **목적**: 사용자 주의를 특정 필드로 보냅니다.
- **사용 사례**: 오류 필드에 초점을 맞추거나 사용자에게 마법사 단계를 안내합니다.
- **모범 사례**: 사용자 흐름을 중단하지 않으려면 제한적으로 사용하십시오.

**속성 설정**

- **목적**: 구성 요소 속성을 동적으로 수정합니다.
- **사용 사례**: 자리 표시자 텍스트를 변경하거나 드롭다운에서 옵션을 수정합니다.
- **모범 사례**: 상황에 맞는 변경 내용으로 사용자 경험을 향상시킵니다.

### **양식 컨트롤 규칙**

**양식 제출**

- **목적**: 양식 제출을 프로그래밍 방식으로 트리거합니다.
- **사용 사례**: 특정 조건이 충족되면 자동으로 제출합니다.
- **모범 사례**: 제출하기 전에 항상 양식의 유효성을 검사하십시오.

**양식 재설정**

- **목적**: 모든 양식 데이터를 지우고 양식을 초기 상태로 다시 설정합니다.
- **사용 사례**: &quot;다시 시작&quot; 기능.
- **모범 사례**: 다시 설정하기 전에 사용자에게 작업을 확인하십시오.

**양식 저장**

- **목적**: 나중에 완료할 수 있도록 양식을 초안으로 저장합니다.
- **사용 사례**: 긴 양식이나 다중 세션 워크플로에 유용합니다.
- **모범 사례**: 저장 상태에 대한 명확한 피드백을 제공합니다.

### **고급 규칙**

**서비스 호출**

- **목적**: 외부 API 또는 서비스를 호출합니다.
- **사용 사례**: 주소 조회, 실시간 유효성 검사 또는 데이터 보강
- **모범 사례**: 로드 상태 및 오류 시나리오를 적절히 처리하십시오.

**인스턴스 추가/제거**

- **목적**: 반복 가능한 섹션을 동적으로 관리합니다.
- **사용 사례**: 가족 구성원 또는 여러 주소를 추가하십시오.
- **모범 사례**: 인스턴스 추가 또는 제거를 위한 명확한 컨트롤을 제공합니다.

**이동**

- **목적**: 사용자를 다른 양식 또는 페이지로 리디렉션합니다.
- **사용 사례**: 다중 양식 워크플로 또는 조건부 라우팅
- **모범 사례**: 탐색 전에 양식 데이터를 유지합니다.

**패널 간 탐색**

- **목적**: 마법사 형식의 탐색을 제어합니다.
- **사용 사례**: 여러 단계 양식 또는 조건부 단계 건너뛰기.
- **모범 사례**: 진행 표시기를 명확하게 표시합니다.

**이벤트 발송**

- **목적**: 고급 통합을 위해 사용자 지정 이벤트를 트리거합니다.
- **사용 사례**: Analytics 추적 또는 타사 통합.
- **모범 사례**: 비차단 작업에만 사용하십시오.


## 단계별 자습서: 스마트 세금 계산기 구축

이 섹션에서는 규칙 편집기의 기능을 보여주는 실용적인 예를 제공합니다. 이 예제에서는 조건부 논리와 자동화된 계산을 사용하는 세금 계산 양식을 작성하는 방법을 안내합니다.

![양식 필드 가시성에 대한 When-Then 논리를 사용하여 조건부 규칙을 만드는 것을 보여 주는 규칙 편집기 인터페이스의 스크린샷](/help/edge/docs/forms/assets/rule-editor-1.png)
*그림: 지능형 조건부 필드가 있는 세금 계산 양식*

### **자습서 개요**

이 자습서에서는 다음과 같은 양식을 만듭니다.

1. **사용자 입력에 적응**: 수입 수준에 따라 관련 필드를 표시합니다.
2. **자동으로 계산**: 실시간으로 세금 부채를 계산합니다.
3. **데이터의 유효성을 검사합니다**: 정확한 계산 및 데이터 입력을 보장합니다.

### **양식 구조**

| 필드 이름 | 유형 | 용도 | 비헤이비어 |
|------------|------|---------|----------|
| **총 급여** | 숫자 입력 | 사용자가 연간 소득을 입력합니다. | 조건부 논리 트리거 |
| **추가 공제** | 숫자 입력 | 추가 공제(해당되는 경우) | 급여가 $50,000일 때 표시 |
| **과세 소득** | 숫자 입력 | 자동으로 계산됨 | 입력 변경 사항에 대한 업데이트 |
| **납부세액** | 숫자 입력 | 최종 세액 | 10% 비율로 계산 |

### **구현할 비즈니스 논리**

**규칙 1: 조건부 필드 표시**

```
WHEN Gross Salary > 50,000
THEN Show "Additional Deduction" field
ELSE Hide "Additional Deduction" field
```

**규칙 2: 과세 소득 계산**

```
SET Taxable Income = Gross Salary - Additional Deduction
(When Additional Deduction is applicable)
```

**규칙 3: 세금 계산**

```
SET Tax Payable = Taxable Income × 10%
(Simplified flat rate for demonstration)
```

### **구현 단계**

지능형 세금 양식을 작성하려면 다음 단계를 따르십시오.



+++ 1: 기초 양식 만들기

**목표**: 필요한 모든 구성 요소를 사용하여 기본 양식 구조를 빌드합니다.

범용 편집기에서 세금 계산 양식을 생성하려면

1. **유니버설 편집기 열기**
   - AEM Sites 콘솔로 이동
   - 양식을 추가할 페이지를 선택합니다
   - **편집**&#x200B;을 클릭하여 유니버설 편집기를 엽니다.

2. **양식 구성 요소 추가**

   다음 순서대로 구성 요소를 추가합니다.

   | 구성 요소 | 유형 | 레이블 | 설정 |
   |-----------|------|-------|----------|
   | 제목 | 제목 | &quot;세금 계산 양식&quot; | 제목 수준 H2 |
   | 숫자 입력 | 숫자 입력 | &quot;총 급여&quot; | 필수: 예, 자리 표시자: &quot;연봉 입력&quot; |
   | 숫자 입력 | 숫자 입력 | &quot;추가 공제&quot; | 필수: 아니오, 자리 표시자: &quot;추가 공제 입력&quot; |
   | 숫자 입력 | 숫자 입력 | &quot;과세 소득&quot; | 필수: 아니요, 읽기 전용: 예 |
   | 숫자 입력 | 숫자 입력 | &quot;납부할 세금&quot; | 필수: 아니요, 읽기 전용: 예 |
   | 제출 버튼 | 제출 | &quot;세금 계산&quot; | 유형: 제출 |

3. **초기 설정 구성**

   - **추가 공제 필드 숨기기**:
      - &quot;추가 공제&quot; 구성 요소 선택
      - 속성 패널에서 **표시**&#x200B;을(를) **아니요**(으)로 설정합니다.
      - 이 필드는 규칙에 따라 조건부로 표시됩니다.

   - **계산된 필드를 읽기 전용으로 만들기**:
      - &quot;과세 소득&quot; 및 &quot;납부할 세금&quot; 필드를 선택합니다.
      - 속성에서 **읽기 전용**&#x200B;을(를) **예**(으)로 설정

     ![총 급여, 결혼 여부, 부양 자녀에 대한 입력 필드가 있는 세금 계산 양식의 스크린샷으로, 규칙이 적용되기 전 양식 구조를 보여 줍니다.](/help/edge/docs/forms/assets/rule-editor2.png)
     *그림: 기본 구성 요소가 구성된 초기 양식 구조*

**검사점**: 이제 &quot;추가 공제&quot;는 숨겨지고 계산된 필드는 읽기 전용인 모든 필수 필드가 있는 양식이 있어야 합니다.

+++

+++ &#x200B;2. 양식 필드에 대한 조건부 규칙 추가

양식을 작성했으면 총 급여가 50,000달러를 초과하는 경우에만 `Additional Deduction` 필드를 표시하도록 첫 번째 규칙을 작성합니다. 조건부 규칙을 추가하려면 다음 작업을 수행하십시오.

1. 범용 편집기에서 양식을 열어 편집하고 콘텐츠 트리에서 **[!UICONTROL 총 급여]** 필드를 선택한 다음 ![edit-rules](/help/forms/assets/edit-rules-icon.svg)를 선택합니다. 또는 **[!UICONTROL 양식 오브젝트]** 창에서 직접 **[!UICONTROL 총 급여]** 필드를 선택할 수도 있습니다.
   ![규칙 편집기 예제1](/help/edge/docs/forms/assets/rule-editor3.png)
시각적 규칙 편집기 인터페이스가 나타납니다.
1. **[!UICONTROL 만들기]**&#x200B;를 클릭하여 규칙을 생성합니다.
   ![규칙 편집기 예제2](/help/edge/docs/forms/assets/rule-editor4.png)
기본적으로 `Set Value Of` 규칙 유형이 선택되어 있습니다. 선택한 오브젝트를 변경하거나 수정할 수는 없지만 규칙 드롭다운을 사용하여 다른 규칙 유형을 선택할 수 있습니다.\
   ![규칙 편집기 예제3](/help/edge/docs/forms/assets/rule-editor5.png)
1. 규칙 유형 드롭다운 목록을 열고 **[!UICONTROL When]** 규칙 유형을 선택합니다.
   ![규칙 편집기 예제4](/help/edge/docs/forms/assets/rule-editor6.png)
1. **[!UICONTROL 상태 선택]** 드롭다운을 선택하고 **[!UICONTROL 다음보다 큼]**&#x200B;을 선택합니다. **[!UICONTROL 숫자 입력]** 필드가 나타납니다.
   ![규칙 편집기 예제5](/help/edge/docs/forms/assets/rule-editor7.png)
1. 규칙의 **[!UICONTROL 숫자 입력]** 필드에서 `50000`을 입력합니다.
   ![규칙 편집기 예제6](/help/edge/docs/forms/assets/rule-editor8.png)
조건을 `When Gross Salary is greater than 50000`으로 정의했습니다. 다음으로 이 조건이 `True`일 경우 수행할 액션을 정의합니다.
1. `Then` 문에서 **[!UICONTROL 액션 선택]** 드롭다운의 **[!UICONTROL 표시]**&#x200B;를 선택합니다.
   ![규칙 편집기 예제7](/help/edge/docs/forms/assets/rule-editor9.png)
1. **[!UICONTROL 오브젝트 드롭 또는 여기에서 선택]** 필드의 양식 오브젝트 탭에서 **[!UICONTROL 추가 공제]** 필드를 드래그 앤 드롭합니다. 또는 **[!UICONTROL 오브젝트를 놓거나 여기에서 선택]** 필드를 선택하고 팝업 메뉴에서 **[!UICONTROL 추가 공제]** 필드를 선택하면 양식의 모든 양식 오브젝트가 나열됩니다.
   ![규칙 편집기 예제8](/help/edge/docs/forms/assets/rule-editor10.png)
1. `50000` 미만의 급여를 입력하는 경우를 위해 **[!UICONTROL 다른 섹션 추가]**&#x200B;를 선택하여 **[!UICONTROL 총 급여]** 필드에 다른 조건을 추가합니다.
   ![규칙 편집기 예제9](/help/edge/docs/forms/assets/rule-editor11.png)
1. `Else` 문에서 **[!UICONTROL 액션 선택]** 드롭다운의 **[!UICONTROL 숨기기]**&#x200B;를 선택합니다.
   ![규칙 편집기 예제10](/help/edge/docs/forms/assets/rule-editor12.png)
1. **[!UICONTROL 오브젝트 드롭 또는 여기에서 선택]** 필드의 양식 오브젝트 탭에서 **[!UICONTROL 추가 공제]** 필드를 드래그 앤 드롭합니다. 또는 **[!UICONTROL 오브젝트를 놓거나 여기에서 선택]** 필드를 선택하고 팝업 메뉴에서 **[!UICONTROL 추가 공제]** 필드를 선택하면 양식의 모든 양식 오브젝트가 나열됩니다.
   ![규칙 편집기 예제11](/help/edge/docs/forms/assets/rule-editor13.png)
1. **[!UICONTROL 완료]**&#x200B;를 선택하여 규칙을 저장합니다.
규칙이 규칙 편집기에 다음과 같이 나타납니다.
   ![규칙 편집기 예제12](/help/edge/docs/forms/assets/rule-editor14.png)

>[!NOTE]
>
> 또는 총 급여 필드에 When 규칙을 작성하는 대신 추가 공제 필드에 표시 규칙을 작성하여 동일한 동작을 구현할 수도 있습니다.

+++

+++ &#x200B;3. 양식 필드에 대한 계산 규칙 추가

다음으로 `Taxable Income`을 계산하는 규칙을 작성합니다. 이는 `Gross Salary`에서 `Additional Deduction`(해당되는 경우)을 뺀 값입니다. **[!UICONTROL 과세 소득]** 필드에 계산 규칙을 추가하려면 다음 단계를 수행하십시오.

1. 작성 모드에서 **[!UICONTROL 과세 소득]** 필드를 선택하고 ![edit-rules](/help/forms/assets/edit-rules-icon.svg) 아이콘을 선택합니다. 또는 **[!UICONTROL 양식 오브젝트]** 창에서 직접 **[!UICONTROL 과세 소득]** 필드를 선택할 수도 있습니다.
1. 그 다음 **[!UICONTROL 만들기]**&#x200B;를 선택하여 규칙을 생성합니다.
   ![규칙 편집기 예제13](/help/edge/docs/forms/assets/rule-editor16.png)
1. **[!UICONTROL 옵션 선택]**&#x200B;을 선택하고 **[!UICONTROL 수학 표현식]**&#x200B;을 선택합니다. 수학 표현식을 작성하는 필드가 열립니다.
   ![규칙 편집기 예제14](/help/edge/docs/forms/assets/rule-editor17.png)

1. 수학 표현 필드에서 다음 작업을 수행하십시오.

   - 양식 오브젝트 탭의 첫 번째 **[!UICONTROL 오브젝트 드롭 또는 여기에서 선택]** 필드에서 **[!UICONTROL 총 급여]** 필드를 선택하거나 드래그 앤 드롭합니다.

   - **[!UICONTROL 연산자 선택]** 필드에서 **[!UICONTROL 빼기]**&#x200B;를 선택합니다.

   - 양식 오브젝트 탭의 기타 **[!UICONTROL 오브젝트 드롭 또는 여기에서 선택]** 필드에서 **[!UICONTROL 추가 공제]** 필드를 선택하거나 드래그 앤 드롭합니다.
     ![규칙 편집기 예제15](/help/edge/docs/forms/assets/rule-editor18.png)

1. **[!UICONTROL 완료]**&#x200B;를 선택하여 규칙을 저장합니다.

   이제 과세 소득에 세율을 곱하여 결정되는 `Tax Payable ` 필드에 대한 규칙을 추가합니다. 단순성을 위해 고정 세율을 `10%`로 가정합니다.

1. 작성 모드에서 **[!UICONTROL 미지급 세금]** 필드를 선택하고 ![edit-rules](/help/forms/assets/edit-rules-icon.svg) 아이콘을 선택합니다. 그 다음 **[!UICONTROL 만들기]**&#x200B;를 선택하여 규칙을 생성합니다.
   ![규칙 편집기 예제16](/help/edge/docs/forms/assets/rule-editor19.png)
1. **[!UICONTROL 옵션 선택]**&#x200B;을 선택하고 **[!UICONTROL 수학 표현식]**&#x200B;을 선택합니다. 수학 표현식을 작성하는 필드가 열립니다.
   ![규칙 편집기 예제17](/help/edge/docs/forms/assets/rule-editor20.png)
1. 수학 표현 필드에서 다음 작업을 수행하십시오.

   - 양식 오브젝트 탭의 첫 번째 **[!UICONTROL 오브젝트 드롭 또는 여기에서 선택]** 필드에서 **[!UICONTROL 과세 소득]** 필드를 선택하거나 드래그 앤 드롭합니다.

   - **[!UICONTROL 연산자 선택]** 필드에서 **[!UICONTROL 곱하기]**&#x200B;를 선택합니다.

   - **[!UICONTROL 옵션 선택]** 필드에서 **숫자**&#x200B;를 선택하고 **[!UICONTROL 숫자 입력]** 필드에 값을 `10`으로 입력합니다.
     ![규칙 편집기 예제18](/help/edge/docs/forms/assets/rule-editor21.png)
1. 다음으로 표현식 필드 주변의 강조 표시된 영역을 선택하고 **[!UICONTROL 표현식 확장]**&#x200B;을 선택합니다.
   ![규칙 편집기 예제19](/help/edge/docs/forms/assets/rule-editor22.png)
1. 확장된 표현식 필드의 **[!UICONTROL 연산자 선택]** 필드에서 **[!UICONTROL 나누기]**&#x200B;를 선택하고 **[!UICONTROL 옵션 선택]** 필드에서 **[!UICONTROL 숫자]**&#x200B;를 선택합니다. 그런 다음 숫자 필드에 `100`을 지정합니다.
   ![규칙 편집기 예제20](/help/edge/docs/forms/assets/rule-editor23.png)
1. **[!UICONTROL 완료]**&#x200B;를 선택하여 규칙을 저장합니다.

+++

+++ &#x200B;4. 양식 미리보기

이제 양식을 미리 보고 **총 급여**&#x200B;를 `60,000`으로 입력하면 **추가 공제** 필드가 나타나고 **과세 소득**&#x200B;과 **미지급 세금**&#x200B;이 이에 따라 계산됩니다.

![양식 미리보기](/help/edge/docs/forms/assets/rule-editor-form.png)

+++

Sum 및 Average와 같은 기본 함수 외에도 사용자 정의 함수를 만들어 특정 요구 사항에 맞는 복잡한 비즈니스 논리를 구현할 수 있습니다.

## 고급: 사용자 정의 함수

**사용자 지정 함수 사용 시기:**

- 기본 제공 함수의 기능을 뛰어넘는 복잡한 계산
- 비즈니스별 검증 규칙을 구현하려면
- 데이터 변환 및 서식 지정
- 외부 시스템 또는 API와 통합하려면

**이점:**

- **재사용 가능성**: 함수를 한 번 작성하여 여러 양식 및 규칙에서 사용합니다.
- **유지 관리**: 업데이트하기 쉬운 중앙 집중식 논리
- **성능**: 최적화된 JavaScript 실행
- **유연성**: 표준 규칙으로 해결되지 않은 복잡한 시나리오를 처리하는 기능

### **사용자 지정 함수 만들기**

AEM 프로젝트의 **파일 위치**: `/blocks/form/functions.js`

**개발 워크플로:**

1. **함수 선언**
   - 명확하고 설명적인 함수 이름 및 매개 변수 정의
   - 함수의 목적을 나타내는 이름 사용
   - 문서 매개 변수 및 반환 유형

2. **논리 구현**
   - 깔끔하고 효율적인 JavaScript 코드 작성
   - 극단적 사례 및 오류 시나리오 처리
   - 코딩 모범 사례 준수

3. **함수 내보내기**
   - 함수를 내보내어 규칙 편집기에서 사용할 수 있도록 합니다.
   - 더 나은 조직을 위해 명명된 내보내기 사용
   - 배포 전 함수 테스트

4. **설명서**
   - 함수 설명서에 대한 JSDoc 주석 추가
   - 사용 예 포함
   - 매개 변수 유형 및 반환 값 지정

다음 예제에서는 두 개의 사용자 지정 함수 `getFullName` 및 `days`을(를) 보여 줍니다.

```JavaScript
/**
 - Get Full Name
 - @name getFullName Concats first name and last name
 - @param {string} firstname in Stringformat
 - @param {string} lastname in Stringformat
 - @return {string}
 */
function getFullName(firstname, lastname) {
  return `${firstname} ${lastname}`.trim();
}

/**
 - Calculate the number of days between two dates.
 - @param {*} endDate
 - @param {*} startDate
 - @name days Calculates the numebr of days between two dates
 - @returns {number} returns the number of days between two dates
 */
function days(endDate, startDate) {
  const start = typeof startDate === 'string' ? new Date(startDate) : startDate;
  const end = typeof endDate === 'string' ? new Date(endDate) : endDate;

  // return zero if dates are valid
  if (Number.isNaN(start.getTime()) || Number.isNaN(end.getTime())) {
    return 0;
  }

  const diffInMs = Math.abs(end.getTime() - start.getTime());
  return Math.floor(diffInMs / (1000 * 60 * 60 * 24));
}

// eslint-disable-next-line import/prefer-default-export
export { getFullName, days };
```

![사용자 정의 함수 추가](/help/edge/docs/forms/assets/create-custom-function.png)

### 규칙 편집기의 사용자 정의 함수 사용

규칙 편집기에서 사용자 지정 함수를 사용하려면 다음을 수행하십시오.

1. **함수 추가**: 사용자 지정 함수를 `../[blocks]/form/functions.js` 파일에 추가합니다. 파일 내의 `export` 문에 포함했는지 확인하십시오.
2. **파일 배포**: 업데이트된 `functions.js` 파일을 GitHub 프로젝트에 배포하고 빌드가 성공적으로 완료되었는지 확인합니다.
3. **함수 사용**: 양식의 규칙 편집기에서 `Function Output`작업 선택&#x200B;**[!UICONTROL 필드에서]** 옵션을 선택하여 함수에 액세스합니다.

   ![규칙 편집기의 사용자 정의 함수](/help/edge/docs/forms/assets/custom-function-rule-editor.png)

4. **양식 미리 보기**: 양식을 미리 보고 새로 구현된 함수가 예상대로 작동하는지 확인합니다.

## 규칙 개발 우수 사례

### **성능 최적화**

**규칙 복잡성 최소화**

- 개별 규칙을 단순하고 초점을 유지하십시오.
- 복잡한 논리를 여러 개의 더 작은 규칙으로 나눕니다.
- 가능한 경우 깊게 중첩된 조건을 사용하지 마십시오.

**규칙 실행 최적화**

- 가장 자주 트리거되는 규칙을 먼저 배치합니다.
- 특정 조건을 사용하여 불필요한 평가를 줄입니다.
- 규칙이 양식 로드 시간에 미치는 영향을 고려합니다.

**리소스 관리**

- 양식 구성 요소당 규칙 수를 제한합니다.
- 규칙을 복제하지 않고 반복되는 논리에 사용자 지정 함수를 사용합니다.
- 실제 데이터 볼륨으로 성능을 테스트합니다.

### **사용자 경험 지침**

**명확한 피드백 제공**

- 사용자에게 올바른 입력을 안내하는 유효성 검사 메시지를 사용하십시오.
- 외부 서비스와 관련된 규칙에 대한 로드 표시기를 표시합니다.
- 인지부하를 줄이기 위해 점진적 공개를 구현합니다.

**양식 응답성 유지**

- 갑작스러운 시각적 변경을 초래하는 규칙을 피하십시오.
- 표시/숨기기 작업을 위해 매끄러운 전환을 구현합니다.
- 다양한 장치 및 화면 크기에서 규칙을 테스트합니다.

**오류 처리**

- 규칙 실패 시 대체 동작을 제공합니다.
- 사용자에게 친숙한 오류 메시지를 표시합니다.
- 긍정적인 사용자 경험을 유지하면서 디버깅을 위해 오류를 기록합니다.

### **개발 우수 사례**

**테스트 전략**

- 경계 사례 및 경계 값으로 규칙을 테스트합니다.
- 서로 다른 브라우저에서 규칙 동작을 확인합니다.
- JavaScript이 활성화되어 있거나 활성화되어 있지 않은 경우 양식 기능을 테스트합니다.

**설명서**

- 복잡한 규칙에 대한 비즈니스 논리를 문서화합니다.
- 대형 양식에 대한 규칙 인벤토리를 유지 관리합니다.
- 구성 요소 및 규칙에 대해 일관된 이름 지정 규칙을 사용합니다.

**버전 제어**

- 버전 제어에서 사용자 지정 함수에 대한 변경 사항을 추적합니다.
- 프로덕션 전에 개발 환경에서 규칙을 테스트합니다.
- 작업 규칙 구성의 백업 복사본을 유지 관리합니다.

## 일반적인 문제 해결

### **규칙 실행 문제**

**규칙이 트리거되지 않음**

- **구성 요소 이름 확인**: 참조된 구성 요소가 있고 올바른 이름을 가지고 있는지 확인하십시오.
- **규칙 순서 확인**: 규칙이 위에서 아래로 실행됩니다. 필요한 경우 순서를 다시 지정합니다.
- **조건 유효성 검사**: 알려진 값으로 조건을 테스트하여 논리를 확인합니다.
- **브라우저 콘솔**: 실행을 차단할 수 있는 JavaScript 오류를 확인합니다.

**잘못된 규칙 동작**

- **논리 연산자 검토**: AND/OR 조건이 올바르게 구성되었는지 확인합니다.
- **샘플 데이터로 테스트**: 알려진 값을 사용하여 문제를 격리합니다.
- **데이터 형식 확인**: 숫자 비교에서 문자열이 아닌 숫자를 사용하는지 확인하십시오.
- **식 유효성 검사**: 수학 식을 별도로 테스트합니다.

### **성능 문제**

**느린 양식 응답**

- **규칙 복잡성을 줄입니다**: 복잡한 조건부 논리를 단순화합니다.
- **사용자 지정 함수 최적화**: JavaScript 코드를 프로파일링하고 최적화합니다.
- **외부 호출 제한**: 규칙에서 서비스 호출을 최소화하십시오.
- **효율적인 선택기 사용**: 양식 개체 참조가 특정한지 확인하십시오.

**메모리 사용**

- **이벤트 리스너 정리**: 사용하지 않는 규칙 바인딩을 제거합니다.
- **사용자 지정 함수 최적화**: JavaScript 코드에서 메모리 누수를 방지합니다.
- **규칙 범위 제한**: 전역 조건 대신 타깃팅된 규칙을 사용하십시오.

### **사용자 지정 기능 문제**

**사용할 수 없는 함수**

- **파일 경로 확인**: `functions.js`이(가) 올바른 위치에 있는지 확인하십시오. `/blocks/form/functions.js`.
- **내보내기 확인**: 함수를 올바르게 내보냈는지 확인하십시오.
- **빌드 프로세스**: 프로젝트 빌드에 업데이트된 함수 파일이 포함되어 있는지 확인하십시오.
- **캐시 지우기**: 새 함수를 배포한 후 브라우저 캐시를 지웁니다.

**함수 오류**

- **매개 변수 유효성 검사**: 함수 매개 변수가 필요한 형식과 일치하는지 확인하십시오.
- **오류 처리**: 예외를 정상적으로 처리할 try-catch 블록을 추가하십시오.
- **콘솔 로깅**: 기능 실행을 디버깅하려면 console.log를 사용합니다.
- **JSDoc 유효성 검사**: 함수 설명서가 구현과 일치하는지 확인하십시오.

### **유니버설 편집기 통합**

**규칙 편집기가 표시되지 않음**

- **확장 사용**: 규칙 편집기 확장이 활성화되었는지 확인하십시오.
- **구성 요소 선택**: 지원되는 양식 구성 요소를 선택했는지 확인하십시오.
- **브라우저 호환성**: 지원되는 브라우저(Chrome, Firefox, Safari)에서 테스트합니다.
- **액세스 권한**: 사용자에게 필요한 AEM 권한이 있는지 확인하십시오.

**인터페이스 문제**

- **패널 가시성**: 전환 단추를 사용하여 양식 개체 패널을 표시하거나 숨깁니다.
- **규칙 저장**: 편집기를 닫기 전에 규칙이 저장되었는지 확인하십시오.
- **브라우저 확대/축소**: 최적의 인터페이스 표시를 위해 브라우저 확대/축소를 100%로 다시 설정합니다.

## 중요한 제한 사항

>[!IMPORTANT]
>
> **사용자 지정 함수 제한**:
>
> - 정적 및 동적 가져오기는 사용자 지정 함수 스크립트에서 지원되지 않습니다.
> - 모든 코드는 `/blocks/form/functions.js` 파일에 직접 포함되어야 합니다.
> - 함수는 동기식이어야 합니다(비동기/대기 또는 약속 없음).
> - 보안상의 이유로 브라우저 API에 대한 액세스가 제한됩니다.

>[!WARNING]
>
> **프로덕션 고려 사항**:
>
> - 스테이징 환경에서 모든 규칙을 철저하게 테스트합니다.
> - 복잡한 규칙을 배포한 후 양식 성능 모니터링
> - 규칙 관련 문제에 대한 롤백 계획이 있습니다.
> - 네트워크 연결이 느린 사용자에게 미치는 영향을 고려합니다.

## 요약

범용 편집기의 규칙 편집기를 사용하면 탁월한 사용자 경험을 제공하는 지능적이고 동적인 양식을 만들 수 있습니다. 조건부 논리, 자동화된 계산 및 사용자 정의 비즈니스 규칙을 구현하여 다음을 수행할 수 있습니다.

**정적 Forms 변환**:

- 더욱 깨끗하고 집중적인 인터페이스를 위해 조건부 필드 가시성을 추가합니다.
- 실시간 계산 및 데이터 유효성 검사를 구현합니다.
- 코딩을 사용하지 않고 정교한 비즈니스 논리를 만듭니다.

**사용자 환경 개선**:

- 사용자에게 논리적 양식 흐름을 안내합니다.
- 지능적인 검증을 통해 오류를 줄일 수 있습니다.
- 즉각적인 피드백 및 지원을 제공합니다.

**효율성 향상**:

- 반복 계산 및 데이터 입력을 자동화합니다.
- 스마트 라우팅을 사용하여 복잡한 워크플로를 간소화합니다.
- 셀프서비스 기능을 통해 지원 부담 감소

### **다음 단계**

규칙 편집기의 기본 사항을 이해했으므로

1. **단순 시작**: 복잡한 계산으로 진행하기 전에 기본 표시/숨기기 규칙으로 시작합니다.
1. **예제를 사용하여 연습**: 세금 계산기 자습서를 기반으로 사용하십시오.
1. **고급 기능 살펴보기**: 특수 요구 사항에 맞게 사용자 지정 기능을 실험해 보십시오.
1. **철저하게 테스트**: 항상 다양한 시나리오 및 장치에서 규칙의 유효성을 검사합니다.
1. **성능 모니터링**: 사용자 경험을 방해하는 대신 규칙이 개선되도록 합니다.
